"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const jsf = require("json-schema-faker");
const tjs = require("typescript-json-schema");
async function fake(files, settings = { locale: 'en' }, transform = (_symboyName, jsonSchema) => jsonSchema) {
    const locale = settings.locale || 'en';
    jsf.extend('faker', () => require(`faker/locale/${locale}`));
    const program = tjs.getProgramFromFiles(files, { lib: ['esnext'] });
    const validationKeywords = settings.validationKeywords ? ['faker', ...settings.validationKeywords] : ['faker'];
    const generator = tjs.buildGenerator(program, { ...settings, validationKeywords, required: true, include: files }, files);
    const userSymbols = generator.getUserSymbols();
    const datas = {};
    const fakeDatas = await Promise.all(userSymbols.map((sym) => jsf.resolve(transform(sym, generator.getSchemaForSymbol(sym)))));
    for (let i = 0; i < fakeDatas.length; ++i) {
        datas[userSymbols[i]] = fakeDatas[i];
    }
    return datas;
}
exports.default = fake;
//# sourceMappingURL=index.js.map